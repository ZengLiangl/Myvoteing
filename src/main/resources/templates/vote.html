<!DOCTYPE html PUBLIC "-//W3C//dtD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/dtD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-Ua-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="format-detection" content="telephone=no">
        <link rel="icon" href="/images/login.jpg">
        <title>发布新投票</title>
        <link href="/css/style.css" rel="stylesheet" type="text/css">
        <script type="text/javascript" th:src="@{/js/jquery-3.3.1.min.js}"></script>
        <link rel="stylesheet" th:href="@{/layui/css/layui.css}" media="all"/>
        <script type="text/javascript" th:src="@{/layui/layui.js}"></script>
    </head>
    <body class="body">
        <div class="wrap" style="background-color: white;min-height: 720px;">
            <th:block th:include="top.html"/>
            <div class="box" id="voteManage" style="height: 520px;">
                <H2>添加新投票</H2>
                <div class="content" style="padding: 0px 0px;">
                    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
                        <legend>就业意向城市</legend>
                    </fieldset>
                    <P class="info">共有 4 个选项，已有 9 个投票。</P>
                    <form method="post" class="layui-form" >
                        <div class="layui-form-item" >
                            <div class="layui-inline">
                                <label class="layui-form-label">选项1：</label>
                                <div class="layui-input-inline">
                                    <input type="radio" name="type" value="1" title="长沙" checked="">
                                </div>
                            </div>
                        </div>
                        <div class="layui-form-item" >
                            <div class="layui-inline">
                                <label class="layui-form-label">投票类型</label>
                                <div class="layui-input-inline">
                                    <input type="radio" name="type" value="1" title="长沙" checked="">
                                </div>
                            </div>
                        </div>
                        <div class="layui-form-item" >
                            <div class="layui-inline">
                                <label class="layui-form-label">投票类型</label>
                                <div class="layui-input-inline">
                                    <input type="radio" name="type" value="1" title="长沙" checked="">
                                </div>
                            </div>
                        </div>
                        <div class="layui-form-item" >
                            <div class="layui-inline">
                                <label class="layui-form-label">投票类型</label>
                                <div class="layui-input-inline">
                                    <input type="radio" name="type" value="1" title="单选" checked="">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="wrap" id="footer"> 北大青鸟 © 版权所有</div>
        </div>
        
        <script type="text/javascript" th:src="@{/js/jquery-3.3.1.min.js}"></script>
        <script type="text/javascript">
            layui.use(['jquery', 'layer', 'form'], function () {
                var $ = layui.jquery;
                var layer = layui.layer;
                var form = layui.form;
            })
             $(function () {
                 var u = getRequest();
                 //根据传入id,查询对应的员工对象 回显到页面
                 $.post("/subject/queryVote", u, function (result) {
                     var type = '';
                     if (result.map.type === 1) {
                         type = 'radio';
                     } else {
                         type = 'checkbox';
                     }
                     var options = '';
                     $.each(result.options, function (index, item) {
                         options += '<li><input name="options" type=' + type + ' value=' + item.ocontent + '>' + item.ocontent + '</li>'
                     })
                     var html = '<li>' +
                         '<H4>' + result.map.title + '</H4>' +
                         '<P class="info">共有 ' + result.map.options + ' 个选项，已有 ' + result.map.items + ' 个投票。</P>' +
                         '<form  method="post">' +
                         '<input name="struts.token.name" type="hidden" value="token">' +
                         '<ol>' + options + '</ol>' +
                         '<P class="voteView">' +
                         '<input type="image" src="images/button_vote.gif"/>' +
                         '<a href="">' +
                         '<img src="images/button_view.gif"/>' +
                         '</a>' +
                         '</P>' +
                         '</form>' +
                         '</li>';
                     $("#vote1").html(html);
                 });
             });
             //返回?后的json对象
             function getRequest() {
                 //获取url中"?"符后的字串
                 var url = location.search;
                 var theRequest = new Object();
                 if (url.indexOf("?") != -1) {
                     var str = url.substr(1);
                     var strs = str.split("&");
                     for (var i = 0; i < strs.length; i++) {
                         theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                     }
                 }
                 return theRequest;
             }
        </script>
    </body>
</html>

